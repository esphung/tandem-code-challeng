{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/ericphung/Desktop/tandem/expo-app-solution/src/screens/PromptScreen.js\";\n\nimport React, { useState, useEffect, useLayoutEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Heading from \"../components/shared/Heading\";\nimport TriviaCard from \"../components/shared/TriviaCard\";\n\nvar SubmitBtn = function SubmitBtn(_ref) {\n  var selectedAnswer = _ref.selectedAnswer,\n      submitBtnPressed = _ref.submitBtnPressed;\n  return React.createElement(Button, {\n    title: \"Submit\",\n    disabled: Boolean(!selectedAnswer),\n    onPress: submitBtnPressed,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 61\n    }\n  });\n};\n\nvar getListData = function getListData(list) {\n  var result = list.map(function (element, index) {\n    var item = {\n      id: index,\n      title: element\n    };\n    return item;\n  });\n  return result;\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    padding: 8,\n    paddingTop: 50\n  },\n  text: {\n    margin: 24,\n    fontSize: 18,\n    textAlign: 'center'\n  }\n});\n\nfunction PromptScreen(_ref2) {\n  var _this2 = this;\n\n  var navigation = _ref2.navigation,\n      route = _ref2.route;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectedAnswer = _useState2[0],\n      setSelectedAnswer = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      listData = _useState4[0],\n      setListData = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      correctAnswer = _useState6[0],\n      setCorrectAnswer = _useState6[1];\n\n  var _route$params = route.params,\n      cardId = _route$params.cardId,\n      data = _route$params.data,\n      results = _route$params.results;\n\n  var showResultsScreen = function showResultsScreen() {\n    navigation.push('Results', {\n      data: data,\n      results: results\n    });\n  };\n\n  var showNextPromptScreen = function showNextPromptScreen() {\n    if (cardId + 1 < global.MAX_QUESTIONS_PER_ROUND) {\n      navigation.push('Prompt', {\n        cardId: cardId + 1,\n        data: data,\n        results: results\n      });\n    } else {\n      showResultsScreen();\n    }\n  };\n\n  var submitBtnPressed = function submitBtnPressed() {\n    if (selectedAnswer) {\n      results.answers[cardId] = selectedAnswer;\n    } else {\n      results.answers[cardId] = {\n        id: cardId,\n        title: ''\n      };\n    }\n\n    if (data[cardId].correct === selectedAnswer.title) {\n      setCorrectAnswer(data[cardId].correct);\n    } else {\n      setCorrectAnswer(data[cardId].correct);\n    }\n  };\n\n  useLayoutEffect(function () {\n    navigation.setOptions({\n      headerRight: function headerRight() {\n        return React.createElement(Button, {\n          onPress: function onPress() {\n            return navigation.replace('Welcome');\n          },\n          title: \"Quit\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 9\n          }\n        });\n      }\n    });\n  }, [navigation]);\n  useEffect(function () {\n    if (cardId >= global.MAX_QUESTIONS_PER_ROUND) showResultsScreen();\n    var answers = data[cardId].incorrect.concat(data[cardId].correct);\n    setListData(getListData(answers));\n    if (results.answers[cardId] && results.answers[cardId].title !== '') setSelectedAnswer(results.answers[cardId]);\n  }, [cardId]);\n  var view = React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 5\n    }\n  }, React.createElement(Heading, {\n    title: \"Question Number:\" + ' ' + (cardId + 1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }\n  }), React.createElement(TriviaCard, {\n    item: data[cardId],\n    selectedAnswer: selectedAnswer,\n    setSelectedAnswer: setSelectedAnswer,\n    cardId: cardId,\n    results: results,\n    listData: listData,\n    setListData: setListData,\n    correctAnswer: correctAnswer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }\n  }), !correctAnswer && React.createElement(SubmitBtn, {\n    selectedAnswer: selectedAnswer,\n    submitBtnPressed: submitBtnPressed,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 27\n    }\n  }), correctAnswer && React.createElement(Button, {\n    title: \"Next\",\n    onPress: function onPress() {\n      return showNextPromptScreen();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 26\n    }\n  }));\n  return view;\n}\n\nexport default PromptScreen;","map":{"version":3,"sources":["/Users/ericphung/Desktop/tandem/expo-app-solution/src/screens/PromptScreen.js"],"names":["React","useState","useEffect","useLayoutEffect","Heading","TriviaCard","SubmitBtn","selectedAnswer","submitBtnPressed","Boolean","getListData","list","result","map","element","index","item","id","title","styles","StyleSheet","create","container","flex","alignItems","padding","paddingTop","text","margin","fontSize","textAlign","PromptScreen","navigation","route","setSelectedAnswer","listData","setListData","correctAnswer","setCorrectAnswer","params","cardId","data","results","showResultsScreen","push","showNextPromptScreen","global","MAX_QUESTIONS_PER_ROUND","answers","correct","setOptions","headerRight","replace","incorrect","concat","view"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useLayoutEffect } from 'react';\nimport {\n  // Text,\n  View,\n  StyleSheet,\n  Button,\n} from 'react-native';\n\n// shared components\nimport Heading from 'components/shared/Heading';\n\nimport TriviaCard from 'components/shared/TriviaCard';\n\nconst SubmitBtn = ({ selectedAnswer, submitBtnPressed }) => <Button\n        title=\"Submit\"\n        disabled={Boolean(!selectedAnswer)}\n        onPress={submitBtnPressed}\n      />\n\nconst getListData = (list) => {\n  const result = list.map((element, index) => {\n    // give item an id and assign it's value property as the element\n    const item = { id: index, title: element };\n    // console.log('item: ', item);\n\n    // DEVELOPER DEBUG: display the item as string if not a string\n    // if (typeof element !== 'string') item.title = JSON.stringify(element);\n    return item;\n  });\n  return result;\n};\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    // justifyContent: 'center',\n    alignItems: 'center',\n    // backgroundColor: 'lightblue', // '#ecf0f1',\n    padding: 8,\n    paddingTop: 50,\n  },\n  text: {\n    margin: 24,\n    fontSize: 18,\n    // fontWeight: 'bold',\n    textAlign: 'center',\n  },\n});\n\n// VIEW COMPONENT DEFINITION BEGINS HERE\nfunction PromptScreen({ navigation, route }) {\n  // console.log('route.params.results: ', route.params.results);\n\n  // state\n  const [selectedAnswer, setSelectedAnswer] = useState('');\n\n  const [listData, setListData] = useState([]);\n\n  const [correctAnswer, setCorrectAnswer] = useState(null);\n\n\n  // props\n  const { cardId, data, results } = route.params;\n  // console.log('data[cardId].question: ', data[cardId].question);\n\n  // Navigation methods\n  const showResultsScreen = () => {\n    // console.log('results.answers.length: ', results.answers.length);\n    // console.log('data.length: ', data.length);\n    navigation.push('Results', {\n    data,\n    results,\n  })};\n  const showNextPromptScreen = () => {\n    // alert(cardId + 1);\n    if (cardId + 1 < global.MAX_QUESTIONS_PER_ROUND) {\n      // show next page\n      navigation.push('Prompt', {\n        cardId: cardId + 1,\n        data,\n        results,\n      });  \n    } else {\n      showResultsScreen();\n    }\n  };\n  const submitBtnPressed = () => {\n    // verify answer\n    \n\n    if (selectedAnswer) {\n      results.answers[cardId] = selectedAnswer;\n    } else {\n      results.answers[cardId] = {\n        id: cardId,\n        title: '',\n      }\n    }\n\n    // alert(selectedAnswer.title);\n    // alert(data[cardId].correct)\n\n    if (data[cardId].correct === selectedAnswer.title) {\n      // PLAYER WAS RIGHT\n      // alert('message?: DOMString')\n      // user's answer is correct, continue on\n      setCorrectAnswer(data[cardId].correct);\n    } else {\n      // PLAYER WAS WRONG\n      setCorrectAnswer(data[cardId].correct);\n\n      // user's answer is wrong, display correct one\n    }\n\n    // alert(JSON.stringify(selectedAnswer, [\"title\"], 1));\n\n    // show correct answer to user\n\n    // // navigate to next screen\n    // if (cardId >= data.length - 1) {\n    //   // if end of list, show results screen to user\n    //   showResultsScreen();\n    // } else {\n    //   // else, show user next question\n    //   showNextPromptScreen();\n    // }\n  };\n  useLayoutEffect(() => {\n    navigation.setOptions({\n      headerRight: () => (\n        <Button onPress={() => navigation.replace('Welcome')} title=\"Quit\" />\n      ),\n    });\n  }, [navigation]);\n  // when previous user answer or answer changes\n  // useEffect(() => {\n  //   // record new answer\n  //   if (selectedAnswer) {\n  //     results.answers[cardId] = selectedAnswer;\n  //   } else {\n  //     results.answers[cardId] = {\n  //       id: cardId,\n  //       title: '',\n  //     }\n  //   }\n  //   // console.log('results.answers: ', results.answers);\n  // }, [selectedAnswer]);\n  // when trivia item changes\n  useEffect(() => {\n    // global.MAX_QUESTIONS_PER_ROUND\n    if (cardId >= global.MAX_QUESTIONS_PER_ROUND) showResultsScreen();\n    // combine answers to be displayed\n    const answers = data[cardId].incorrect.concat(data[cardId].correct);\n\n    // parse answers into list data format\n    setListData(getListData(answers));\n\n    // set any previously chosen player answers\n    // console.log('results.answers[cardId]: ', results.answers[cardId]);\n    if (results.answers[cardId] && results.answers[cardId].title !== '') setSelectedAnswer(results.answers[cardId]);\n  }, [cardId]);\n  const view = (\n    <View style={styles.container}>\n      {/* TRIVIA CARD */}\n      <Heading title={`Question Number:${' '}${cardId + 1}`} />\n      <TriviaCard\n        item={data[cardId]}\n        selectedAnswer={selectedAnswer}\n        setSelectedAnswer={setSelectedAnswer}\n        cardId={cardId}\n        results={results}\n        listData={listData}\n        setListData={setListData}\n        correctAnswer={correctAnswer}\n\n      />\n      {/* SUBMIT BUTTON */}\n      {\n        !correctAnswer && <SubmitBtn selectedAnswer={selectedAnswer} submitBtnPressed={submitBtnPressed} />\n      }\n      {\n        correctAnswer && <Button title=\"Next\" onPress={() => showNextPromptScreen()} />\n      }\n    </View>\n  );\n  return view;\n} // END VIEW DEF\n\nexport default PromptScreen;\n"]},"metadata":{},"sourceType":"module"}